# 아이템31. 문서로 규약을 정의하라

함수가 무엇을 하는지 명확하게 하고 싶다면, KDoc 주석을 사용하면 좋다.

```kotlin
/**
* 이 함수는 어떤 함수이다.
* @param message 사용자에게 보여줄 메시지
* @param length 메시지 길이 
**/
```

행위가 문서화되지 않으면서 요소의 이름이 명확하지 않으면 구현에만 의존하게 된다.(구현 코드를 보면서 이해해야한다는 뜻인듯.) 따라서 예상되는 행위를 문서로 설명하면 좋다.

## 4.31.1. 규약

예측되는 행위를 요소의 규약(contract of an element)이라고 부른다. 규약이 적절히 정의되면 만든 사람은 어떻게 사용될지 걱정하지 않아도 되고, 사용하는 사람은 내부가 어떻게 구현되어 있는지 걱정하지 않아도 된다.

## 4.31.2. 규약 정의하기

규약을 정의하는 데는 다양한 방법이 있다.

1. 이름 : 일반적인 개념과 다른 메소드는 이름만으로 동작을 예측할 수 있다. 예를 들어 sum 이라는 메소드는 무엇을 하는지 잘 알 것이다.
2. 주석과 문서: 필요한 모든 규약을 적을 수 있다.
3. 타입: 객체에 대한 많은 것을 알려주고, 일부 타입은 문서로 추가 설명해야 한다.

## 4.31.3. 주석을 써야할까?

자바 초반에는 주석으로 모든 것을 설명하는 문학적 프로그래밍 개념이 인기가 많았다. 10년이 지난 후에는 주석 없이 읽을 수 있도록 작성하는 방식으로 바뀌었다.(로버트 마틴 - 클린 코드) 

극단적인 것은 좋지 않지만 코드만 읽어도 어느 정도 알 수 있는 코드를 만드는 것이 좋다. 현대의 주석은 문서를 자동 생성하는 데 많이 사용된다. 

주석을 보고 간단하게 어떤 내용인지 설명하면 내용을 공부하는 데 도움이 된다.

## 4.31.4. KDoc 형식

주석으로 함수를 문서화할 때 사용되는 공식적인 형식을 KDoc 이라고 부르며 /** 로 시작해서 */ 로 끝나고 사이의 모든 줄은 *로 시작한다.

- 첫 번째 부분은 요약 설명이다.
- 두 번째 부분은 상세 설명이다.
- 이어지는 줄은 모드 태그로 시작해서 추가 설명을 한다.
    - @param <name>: 함수 파라미터 또는 클래스, 프로퍼티, 함수 타입 파라미터
    - @return: 함수의 리턴값
    - @constructor: 클래스의 기본 생성자
    - @receiver: 확장 함수의 리시버
    - @property <name>: 명확한 이름을 갖고 있는 클래스의 프로퍼티. 기본 생성자에 정의된 프로퍼티에 사용
    - @throws <class>, @exception <class>: 내부에서 발생할 수 있는 예외
    - @sample <identifier>: 정규화된 형식 이름을 사용해서 함수의 사용 예를 문서화
    - @see <identifier>:  클래스 또는 메소드에 대한 링크
    - @author: 작성자
    - @since: 버전
    - @supress: 문서에서 제외

링크를 걸 때는 대괄호를 사용하고 링크 대상에 대한 설명을 입력하고 싶을 때는 대괄호를 두 번 연속해서 사용한다.

공식적인 코틀린 문서 생성 도구의 이름은 Dokka이다. 

## 4.31.5. 타입 시스템과 예측

클래스가 어떤 동작을 한다면 서브 클래스도 이를 보장해야 한다. 이를 리스코프 치환 원칙이라고 한다. S가 T의 서브타입 이라면, 별도의 변경 없어도 T 타입 객체를 S 타입 객체로 대체할 수 있어야 한다. 여기에 문제가 있다면 다양한 상속 문제가 발생한다.

사용자가 클래스의 동작을 확실하게 예측하게 하려면 공개 함수에 대한 규약을 잘 지정해야하고, 이를 문서로 전달할 수 있다.

## 4.31.6. 조금씩 달라지는 세부사항

구현의 세부적인 내용은 항상 조금씩 다를 수 있는데 이는 규약에 명시되어 있지 않으므로 괜찮다.

구현의 세부사항은 항상 달라질 수 있고, 최대한 많이 캡슐화를 통해 보호하는 것이 좋다. 캡슐화는 허용하는 범위를 지정하는 데 도움이 된다. 캡슐화가 많이 적용될 수록 사용자가 구현에 많이 신경쓸 필요가 없어진다.
