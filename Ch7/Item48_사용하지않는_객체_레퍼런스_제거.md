# 아이템 48. 더 이상 사용하지 않는 객체의 레퍼런스를 제거하라

자바는 GC가 메모리 관리를 해주지만 상황에 따라서 OOM 이 발생하기도 한다. 따라서 리소스를 정적으로 유지 하지 않는게 가장 좋고 객체의 레퍼런스를 다른 곳에 저장할 땐 메모리 누수의 가능성을 항상 고민해야 한다.

더이상 쓰지 않는 필드는 null 로 해주면 좋다. 물론, 거의 사용되지 않는 객체까지 신경쓰는 것은 오히려 좋지 않을 수 있지만, 어려운 것이 아니니까 null 로 세팅해주면 좋다.

(긴 코드 참조..)

일반적으로 가독성과 확장성을 더 중시하는게 좋지만 예외적으로 라이브러리를 구현할 때에는 메모리와 성능이 더 중요하다. 

일반적으로 메모리 누수가 발생하는 곳은,

1. 절대 사용되지 않는 객체를 캐시해서 저장 → 소프트 레퍼런스 사용하면 GC가 알아서 해제한다.
2. 일부 객체는 약한 레퍼런스(weak reference)를 사용한다. 

힙 프로파일러로 메모리 누수를 찾을 수도 있다. LeakCanary 로 메모리 누수가 검출될 때마다 알림을 받을 수도 있다. 

보통 스코프를 벗어나면서 객체가 자동으로 해제된다. 따라서 아이템2에서 말했던 것처럼 변수를 지역 스코프에 정의하고, 톱레벨 프로퍼티, companion 으로 큰 데이터를 저장하지 않는 것이 좋다.
